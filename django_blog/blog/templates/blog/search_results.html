<h2>Search results for "{{ query }}"</h2>

{% if posts %}
  <ul class="post-list">
    {% for post in posts %}
      <li>
        <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
        <p>{{ post.content|truncatechars:150 }}</p>
        <div>
          {% for tag in post.tags.all %}
            <a href="{% url 'posts_by_tag' tag.name %}">{{ tag.name }}</a>
          {% endfor %}
        </div>
      </li>
    {% endfor %}
  </ul>

  {% if posts.has_other_pages %}
    <nav>
      {% if posts.has_previous %}
        <a href="?q={{ query }}&page={{ posts.previous_page_number }}">Prev</a>
      {% endif %}
      <span>Page {{ posts.number }} of {{ posts.paginator.num_pages }}</span>
      {% if posts.has_next %}
        <a href="?q={{ query }}&page={{ posts.next_page_number }}">Next</a>
      {% endif %}
    </nav>
  {% endif %}
{% else %}
  <p>No posts match your search.</p>
{% endif %}
